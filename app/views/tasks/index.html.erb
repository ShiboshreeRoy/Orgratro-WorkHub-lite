<body class="bg-black text-blue-100">
<h1 class="text-3xl font-bold text-blue-400 mb-6 text-center">ðŸ“‹ Tasks</h1>

<!-- Only admins see the "New Task" button -->
<% if current_user.admin? %>
  <div class="text-center mb-6">
    <%= link_to "âž• New Task", new_task_path,
                class: "inline-block px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition" %>
  </div>
<% end %>

<!-- Tasks Table -->
<table class="w-full border border-blue-800 text-blue-100 bg-black rounded-xl shadow-lg">
  <thead class="bg-blue-950 text-blue-400">
    <tr>
      <th class="px-4 py-3 border-b border-blue-800 text-left">Name</th>
      <th class="px-4 py-3 border-b border-blue-800 text-left">Type</th>
      <th class="px-4 py-3 border-b border-blue-800 text-left">Link</th>
      <th class="px-4 py-3 border-b border-blue-800 text-left">Description</th>
      
      <% if current_user.admin? %>
        <th class="px-4 py-3 border-b border-blue-800 text-left">Actions</th>
      <% end %>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr class="hover:bg-blue-950 transition">
        <td class="px-4 py-3 border-b border-blue-900"><%= task.name %></td>
        <td class="px-4 py-3 border-b border-blue-900"><%= task.task_type %></td>
        <td class="px-4 py-3 border-b border-blue-900"><%= task.link %></td>
        <td class="px-4 py-3 border-b border-blue-900"><%= task.description %></td>


        <% if current_user.admin? %>
          <td class="px-4 py-3 border-b border-blue-900 space-x-3">
            <%= link_to "âœï¸ Edit", edit_task_path(task),
                        class: "text-blue-400 hover:text-blue-300" %> |
            <%= link_to "ðŸ—‘ï¸ Delete", task_path(task),
                        method: :delete,
                        data: { confirm: "Are you sure?" },
                        class: "text-red-400 hover:text-red-300" %> |
            <%= link_to "ðŸ“¢ Send to All", send_to_all_task_path(task),
                        method: :post,
                        data: { confirm: "Send this task to all users?" },
                        class: "text-yellow-400 hover:text-yellow-300" %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
<div class="mt-6 flex justify-center">
  <%= paginate @tasks %>
</div>

</body>