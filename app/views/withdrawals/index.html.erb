<body class="bg-black text-black font-sans   antialiased">
     <div class="mt-4  mmb-2">
        <h1 class="text-3xl font-bold mb-6 text-black">Withdrawals</h1>

<% if current_user.admin? %>
  <h2 class="text-xl font-bold mb-4 text-white">All User Withdrawal Requests</h2>
<% else %>
  <%= link_to "Request Withdrawal", new_withdrawal_path, class: "bg-blue-600 text-black px-4 py-2 rounded hover:bg-blue-700 mb-4 inline-block font-bold" %>
<% end %>

<table class="min-w-full divide-y divide-gray-200 mt-4">
  <thead class="bg-gray-100">
    <tr>
      <% if current_user.admin? %>
        <th class="px-6 py-3 text-left text-xs font-bold text-black uppercase tracking-wider">User</th>
      <% end %>
      <th class="px-6 py-3 text-left text-xs font-bold text-black uppercase tracking-wider">Amount</th>
      <th class="px-6 py-3 text-left text-xs font-bold text-black uppercase tracking-wider">Payment Method</th>
      <th class="px-6 py-3 text-left text-xs font-bold text-black uppercase tracking-wider">Status</th>
      
      <th class="px-6 py-3 text-left text-xs font-bold text-black uppercase tracking-wider">Account Details</th>

      <th class="px-6 py-3 text-left text-xs font-bold text-black uppercase tracking-wider">Requested At</th>
      <% if current_user.admin? %>
        <th class="px-6 py-3 font-bold text-black">Actions</th>
      <% end %>
    </tr>
  </thead>
  <tbody class="bg-white divide-y divide-gray-200">
    <% @withdrawals.each do |withdrawal| %>
      <tr>
        <% if current_user.admin? %>
          <td class="px-6 py-4 whitespace-nowrap text-black font-bold"><%= withdrawal.user.email %></td>
        <% end %>
        <td class="px-6 py-4 whitespace-nowrap text-black font-bold">$<%= number_with_precision(withdrawal.amount, precision: 4) %></td>
        <td class="px-6 py-4 whitespace-nowrap text-black font-bold">
          <% case withdrawal.payment_method %>
          <% when 'bank_transfer' %>
            ğŸ¦ Bank Transfer
          <% when 'bkash' %>
            ğŸ“± Bkash
          <% when 'nagad' %>
            ğŸ“± Nagad
          <% when 'rocket' %>
            ğŸ“± Rocket
          <% when 'paypal' %>
            ğŸ’³ PayPal
          <% when 'mastercard' %>
            ğŸ’³ Mastercard
          <% when 'visa' %>
            ğŸ’³ Visa
          <% when 'usdt_trc20' %>
            ğŸª™ USDT TRC20
          <% when 'usdt_erc20' %>
            ğŸª™ USDT ERC20
          <% when 'bitcoin' %>
            â‚¿ Bitcoin
          <% when 'ethereum' %>
            â§« Ethereum
          <% else %>
            <%= withdrawal.payment_method&.humanize || 'N/A' %>
          <% end %>
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-black font-bold">
          <span class="<%= withdrawal.status == 'approved' ? 'text-green-600 font-bold' : 'text-black font-bold' %>">
            <%= withdrawal.status.capitalize %>
          </span>
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-black font-bold">
          <% if withdrawal.payment_details.present? %>
            <span class="truncate max-w-xs inline-block" title="<%= withdrawal.payment_details %>">
              <%= withdrawal.payment_details.truncate(30) %>
            </span>
          <% else %>
            <em class="text-gray-500">N/A</em>
          <% end %>
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-black font-bold"><%= withdrawal.created_at.strftime("%d %b %Y %H:%M") %></td>
        <% if current_user.admin? %>
          <td class="px-6 py-4">
            <% if withdrawal.status == "pending" %>
              <%= button_to "Approve", update_status_withdrawal_path(withdrawal, status: "approved"), method: :patch, class: "bg-green-600 text-black px-3 py-1 rounded hover:bg-green-700 font-bold mr-2", data: { confirm: "Approve this withdrawal?" } %>
              <%= button_to "Reject", update_status_withdrawal_path(withdrawal, status: "rejected"), method: :patch, class: "bg-red-600 text-black px-3 py-1 rounded hover:bg-red-700 font-bold", data: { confirm: "Reject this withdrawal?" } %>
            <% else %>
              <span class="px-3 py-1 rounded font-bold text-white 
                <% case withdrawal.status %>
                <% when 'approved' %>
                  bg-green-600
                <% when 'rejected' %>
                  bg-red-600
                <% else %>
                  bg-gray-600
                <% end %>
              ">
                <%= withdrawal.status.capitalize %>
              </span>
            <% end %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
     </div>

</body>
